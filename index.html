<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lazy loading</title>
    <link
      href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,500,700,900&display=swap&subset=korean"
      rel="stylesheet" />
    <link rel="stylesheet" href="./css/base.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"></script>
    <script defer src="/js/app.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js"
      integrity="sha512-21jyjW5+RJGAZ563i/Ug7e0AUkY7QiZ53LA4DWE5eNu5hvjW6KUf9LqquJ/ziLKWhecyvvojG7StycLj7bT39Q=="
      crossorigin="anonymous"></script>
  </head>

  <body>
    <div id="viewport">
      <ul class="list">
        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1664575196079-9ac04582854b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666028160178-6597a4ce779c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=727&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666030910636-6291b581962e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666005487638-61f45819c975?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1665991947192-a63451f34c90?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1665686310974-2ed1eb7f57ac?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://plus.unsplash.com/premium_photo-1661342428304-467a7d6b66d2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666031116438-732c23be9a42?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666021575644-ce1c9a616a9c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666012710762-1c5e258adf99?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1664575600796-ffa828c5cb6e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666028159856-f3246c1e2416?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1230&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://plus.unsplash.com/premium_photo-1661963552599-34680420acc8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666025958150-f22e446d8334?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>

        <li class="list-item">
          <div class="list-item__thumb">
            <img
              class="lozad"
              data-src="https://images.unsplash.com/photo-1666021110874-24e450fa215c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
              alt="" />
          </div>
          <p class="list-item__tit">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
          <p class="list-item__desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Error, quas?</p>
        </li>
      </ul>

      <script>
        const viewport = document.querySelector('#viewport');
        const observer = lozad();

        addEventListener('scroll', () => {
          let windowHeight = innerHeight;
          let viewportHeight = viewport.clientHeight;

          if (viewportHeight - windowHeight - windowHeight / 10 <= scrollY) {
            $.ajax({
              url: './data/list.html',
              method: 'GET',
              dataType: 'html',
              success: function (data) {
                document.querySelector('.list').insertAdjacentHTML('beforeend', data);
                observer.observe();
              },
              error: function (e) {
                new Error(e);
              },
            });
          }
        });

        observer.observe();
      </script>
    </div>
  </body>
</html>
